" FZF - Fuzzy finder written in Go

Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all --no-update-rc' }
Plug 'junegunn/fzf.vim'

if has('nvim')
  let $FZF_DEFAULT_OPTS .= ' --inline-info'
endif

" ripgrep https://github.com/BurntSushi/ripgrep
if executable('rg')
  let g:rg_command='rg --column -F --no-heading --hidden -S --color=always '
  command! -bang -nargs=* Rg call fzf#vim#grep(g:rg_command .shellescape(<q-args>), 1, <bang>0)

  set grepprg=rg\ -H\ --no-heading\ --vimgrep
  set grepformat=%f:%l:%c:%m

  " grep word under cursor
  nnoremap K :set nois<CR> :Rg <C-R><C-W><CR>


" The Silver Searcher  https://github.com/ggreer/the_silver_searcher
elseif executable('ag')
  set grepprg=ag\ --nogroup\ --nocolor\ --vimgrep
  set grepformat=%f:%l:%c:%m,%f:%l:%m

  " grep word under cursor
  nnoremap K :set nois<CR> :Ag <C-R><C-W><CR>


" Fallback to git ls-files for filename search if nothing else is available
else
  nnoremap <silent> <c-p> :GFiles -co --exclude-standard<cr>
endif

" fuzzy search by filename
nnoremap <silent> <c-p> :Files<cr>
" fuzzy search buffers
nnoremap <silent> <Leader>b :Buffers<CR>

" vim:ft=vim
